<label class="block clearfix">
  <span class="block input-icon input-icon-right">
    <input style="display:none"><!-- for disable autocomplete on chrome -->
    <input required="required" name="password" type="password" class="form-control" placeholder="密码" autocomplete="off"/>
    <i class="ace-icon fa fa-lock"></i>
  </span>
</label>
<span class="pwErr red" style="display: none"></span>

<label class="block clearfix">
  <span class="block input-icon input-icon-right">
    <input required="required" name="password2" type="password" class="form-control" placeholder="重复密码" />
    <i class="ace-icon fa fa-retweet"></i>
  </span>
</label>
<span class="pwaErr red" style="display: none"></span>

<script type="text/javascript">
  jQuery(function($) {
    //password验证
    $("input[name=password]").blur(function(){
      var pw = $(this).val();
      var flag = true;
      if( pw.length > 0 && pw.length < 6){
        flag = false;
      }
      if (!flag) {
        $(this).closest("form").find(".pwErr").show();
        $(this).closest("form").find(".pwErr").text("密码为不少于6位的数字、字母");
        $(this).closest("form").find("button[type=submit]").attr("disabled", true);
      } else {
        $(this).closest("form").find(".pwErr").hide();
        $(this).closest("form").find("button[type=submit]").attr("disabled", false);
      }
    });

    //password是否相同的验证
    $("input[name=password2]").blur(function(){
      var pwa = $(this).val();
      var pw = $(this).closest("form").find("input[name=password]").val();
      var flag = true;
      if(pwa > 0 && pwa != pw){
        flag = false;
      }
      if (!flag) {
        $(this).closest("form").find(".pwaErr").show();
        $(this).closest("form").find(".pwaErr").text("两次密码输入不一致");
        $('#pwd-btn').attr('disabled', true);
      } else {
        $(this).closest("form").find(".pwaErr").hide();
        $('#pwd-btn').attr('disabled', false);
      }
    });
  });

</script>
